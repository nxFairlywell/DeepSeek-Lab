<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار القدرات العامة GAT</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #34495e;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--primary);
            color: white;
            padding: 1rem 0;
            text-align: center;
            border-radius: 8px 8px 0 0;
        }
        
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin-bottom: 20px;
        }
        
        .btn {
            display: inline-block;
            background: var(--secondary);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
            font-size: 16px;
            margin: 5px;
            transition: background 0.3s;
        }
        
        .btn:hover {
            background: #2980b9;
        }
        
        .btn-success {
            background: var(--success);
        }
        
        .btn-success:hover {
            background: #27ae60;
        }
        
        .btn-danger {
            background: var(--danger);
        }
        
        .btn-danger:hover {
            background: #c0392b;
        }
        
        .timer {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--danger);
            text-align: center;
            margin: 15px 0;
        }
        
        .question {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .options {
            margin-top: 10px;
        }
        
        .option {
            display: block;
            margin: 10px 0;
            padding: 10px;
            background: var(--light);
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .option:hover {
            background: #d5dbdb;
        }
        
        .option.selected {
            background: var(--secondary);
            color: white;
        }
        
        .correct {
            background: var(--success) !important;
            color: white;
        }
        
        .incorrect {
            background: var(--danger) !important;
            color: white;
        }
        
        .result-summary {
            text-align: center;
            margin: 20px 0;
        }
        
        .score {
            font-size: 2rem;
            font-weight: bold;
            color: var(--secondary);
        }
        
        .hidden {
            display: none;
        }
        
        .progress-bar {
            height: 10px;
            background: #eee;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: var(--secondary);
            width: 0%;
            transition: width 0.3s;
        }
        
        .question-counter {
            text-align: center;
            margin-bottom: 10px;
            color: var(--dark);
        }
        
        footer {
            text-align: center;
            margin-top: 20px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            
            .card {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>اختبار القدرات العامة (GAT)</h1>
        </header>
        
        <!-- شاشة البداية -->
        <div id="start-screen" class="card">
            <h2>مرحباً بك في اختبار القدرات العامة</h2>
            <p>يتكون هذا الاختبار من 10 أسئلة تغطي مختلف جوانب اختبار القدرات العامة.</p>
            <ul>
                <li>مدة الاختبار: 30 دقيقة</li>
                <li>عدد الأسئلة: 10 أسئلة</li>
                <li>سيتم عرض النتيجة فور انتهاء الوقت أو إنهاء الاختبار</li>
            </ul>
            <button id="start-btn" class="btn btn-success">بدء الاختبار</button>
        </div>
        
        <!-- شاشة الاختبار -->
        <div id="test-screen" class="card hidden">
            <div class="timer" id="timer">30:00</div>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <div class="question-counter" id="question-counter">السؤال 1 من 10</div>
            
            <div id="questions-container">
                <!-- سيتم تعبئة الأسئلة هنا ديناميكياً -->
            </div>
            
            <div style="text-align: center;">
                <button id="prev-btn" class="btn">السابق</button>
                <button id="next-btn" class="btn">التالي</button>
                <button id="submit-btn" class="btn btn-success">إنهاء الاختبار</button>
            </div>
        </div>
        
        <!-- شاشة النتائج -->
        <div id="result-screen" class="card hidden">
            <div class="result-summary">
                <h2>نتيجة الاختبار</h2>
                <div class="score" id="score">0/10</div>
                <p id="result-message"></p>
            </div>
            
            <div id="answers-review">
                <!-- سيتم تعبئة مراجعة الإجابات هنا ديناميكياً -->
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button id="restart-btn" class="btn">إعادة الاختبار</button>
            </div>
        </div>
        
        <footer>
            <p>© 2023 اختبار القدرات العامة GAT - جميع الحقوق محفوظة</p>
        </footer>
    </div>

    <script>
        // بيانات الأسئلة
        const questions = [
            {
                id: 1,
                question: "إذا كان سعر الكتاب 40 ريالاً، وخُفّض بنسبة 25%، فكم يصبح سعره بعد التخفيض؟",
                options: ["30 ريال", "35 ريال", "25 ريال", "20 ريال"],
                correctAnswer: 0
            },
            {
                id: 2,
                question: "ما العدد الذي إذا ضرب في 7 وأضيف إلى الناتج 5 يصبح الناتج 40؟",
                options: ["5", "6", "7", "8"],
                correctAnswer: 0
            },
            {
                id: 3,
                question: "إذا كان 3 س + 2 = 14، فما قيمة س؟",
                options: ["3", "4", "5", "6"],
                correctAnswer: 1
            },
            {
                id: 4,
                question: "ما هو الرقم التالي في المتتالية: 2، 4، 8، 16، ...؟",
                options: ["24", "32", "36", "40"],
                correctAnswer: 1
            },
            {
                id: 5,
                question: "إذا كان عمر أحمد ضعف عمر بكر، وكان مجموع عمريهما 36 سنة، فكم عمر أحمد؟",
                options: ["12 سنة", "18 سنة", "24 سنة", "30 سنة"],
                correctAnswer: 2
            },
            {
                id: 6,
                question: "ما هو العدد الذي إذا أضيف إلى ٥ كان الناتج ١٢؟",
                options: ["6", "7", "8", "9"],
                correctAnswer: 1
            },
            {
                id: 7,
                question: "إذا كانت النسبة بين عدد الأولاد إلى عدد البنات في فصل هي ٣:٥، وكان عدد البنات ٢٥، فكم عدد الأولاد؟",
                options: ["10", "12", "15", "18"],
                correctAnswer: 2
            },
            {
                id: 8,
                question: "إذا كان ٤٠٪ من عدد يساوي ٨٠، فما هو هذا العدد؟",
                options: ["120", "160", "200", "240"],
                correctAnswer: 2
            },
            {
                id: 9,
                question: "ما هو العدد الذي إذا طرح منه ٧ كان الناتج ١٥؟",
                options: ["20", "21", "22", "23"],
                correctAnswer: 2
            },
            {
                id: 10,
                question: "إذا كان ٢س + ٥ = ١٧، فما قيمة س؟",
                options: ["4", "5", "6", "7"],
                correctAnswer: 2
            }
        ];

        // متغيرات التطبيق
        let currentQuestionIndex = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let timeLeft = 30 * 60; // 30 دقيقة بالثواني
        let timerInterval;
        let testCompleted = false;

        // عناصر DOM
        const startScreen = document.getElementById('start-screen');
        const testScreen = document.getElementById('test-screen');
        const resultScreen = document.getElementById('result-screen');
        const startBtn = document.getElementById('start-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit-btn');
        const restartBtn = document.getElementById('restart-btn');
        const timerElement = document.getElementById('timer');
        const progressElement = document.getElementById('progress');
        const questionCounterElement = document.getElementById('question-counter');
        const questionsContainer = document.getElementById('questions-container');
        const scoreElement = document.getElementById('score');
        const resultMessageElement = document.getElementById('result-message');
        const answersReviewElement = document.getElementById('answers-review');

        // بدء الاختبار
        startBtn.addEventListener('click', startTest);

        function startTest() {
            startScreen.classList.add('hidden');
            testScreen.classList.remove('hidden');
            
            // تهيئة المؤقت
            startTimer();
            
            // عرض السؤال الأول
            displayQuestion(currentQuestionIndex);
        }

        // إدارة المؤقت
        function startTimer() {
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                updateProgressBar();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    finishTest();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // تغيير اللون عندما يقل الوقت عن 5 دقائق
            if (timeLeft < 300) {
                timerElement.style.color = 'var(--danger)';
            }
        }

        function updateProgressBar() {
            const totalTime = 30 * 60;
            const progressPercentage = ((totalTime - timeLeft) / totalTime) * 100;
            progressElement.style.width = `${progressPercentage}%`;
        }

        // عرض الأسئلة
        function displayQuestion(index) {
            questionsContainer.innerHTML = '';
            
            const question = questions[index];
            questionCounterElement.textContent = `السؤال ${index + 1} من ${questions.length}`;
            
            const questionElement = document.createElement('div');
            questionElement.className = 'question';
            
            const questionText = document.createElement('h3');
            questionText.textContent = question.question;
            questionElement.appendChild(questionText);
            
            const optionsContainer = document.createElement('div');
            optionsContainer.className = 'options';
            
            question.options.forEach((option, optionIndex) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                if (userAnswers[index] === optionIndex) {
                    optionElement.classList.add('selected');
                }
                optionElement.textContent = option;
                optionElement.dataset.optionIndex = optionIndex;
                
                optionElement.addEventListener('click', () => {
                    selectOption(index, optionIndex);
                });
                
                optionsContainer.appendChild(optionElement);
            });
            
            questionElement.appendChild(optionsContainer);
            questionsContainer.appendChild(questionElement);
            
            // تحديث حالة أزرار التنقل
            updateNavigationButtons();
        }

        function selectOption(questionIndex, optionIndex) {
            userAnswers[questionIndex] = optionIndex;
            displayQuestion(currentQuestionIndex);
        }

        function updateNavigationButtons() {
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.disabled = currentQuestionIndex === questions.length - 1;
        }

        // التنقل بين الأسئلة
        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion(currentQuestionIndex);
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion(currentQuestionIndex);
            }
        });

        // إنهاء الاختبار
        submitBtn.addEventListener('click', () => {
            if (confirm("هل أنت متأكد من إنهاء الاختبار؟")) {
                finishTest();
            }
        });

        function finishTest() {
            clearInterval(timerInterval);
            testCompleted = true;
            
            testScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            
            showResults();
        }

        // عرض النتائج
        function showResults() {
            let correctCount = 0;
            
            // حساب عدد الإجابات الصحيحة
            questions.forEach((question, index) => {
                if (userAnswers[index] === question.correctAnswer) {
                    correctCount++;
                }
            });
            
            const score = correctCount;
            const totalQuestions = questions.length;
            const percentage = (score / totalQuestions) * 100;
            
            scoreElement.textContent = `${score}/${totalQuestions}`;
            
            // رسالة النتيجة
            let message = "";
            if (percentage >= 80) {
                message = "ممتاز! أداء رائع.";
            } else if (percentage >= 60) {
                message = "جيد جداً! يمكنك التحسين أكثر.";
            } else if (percentage >= 40) {
                message = "مقبول. تحتاج إلى مزيد من الممارسة.";
            } else {
                message = "ضعيف. يرجى المراجعة والمحاولة مرة أخرى.";
            }
            
            resultMessageElement.textContent = message;
            
            // عرض مراجعة الإجابات
            displayAnswersReview();
        }

        function displayAnswersReview() {
            answersReviewElement.innerHTML = '<h3>مراجعة الإجابات:</h3>';
            
            questions.forEach((question, index) => {
                const questionReview = document.createElement('div');
                questionReview.className = 'question';
                
                const questionText = document.createElement('h4');
                questionText.textContent = `${index + 1}. ${question.question}`;
                questionReview.appendChild(questionText);
                
                const optionsContainer = document.createElement('div');
                optionsContainer.className = 'options';
                
                question.options.forEach((option, optionIndex) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    
                    // تحديد فئة الإجابة
                    if (optionIndex === question.correctAnswer) {
                        optionElement.classList.add('correct');
                    } else if (userAnswers[index] === optionIndex && userAnswers[index] !== question.correctAnswer) {
                        optionElement.classList.add('incorrect');
                    }
                    
                    // إضافة علامة للإجابة المختارة والإجابة الصحيحة
                    let prefix = "";
                    if (optionIndex === userAnswers[index]) {
                        prefix = "إجابتك: ";
                    }
                    if (optionIndex === question.correctAnswer) {
                        prefix = "الإجابة الصحيحة: ";
                    }
                    
                    optionElement.textContent = `${prefix}${option}`;
                    optionsContainer.appendChild(optionElement);
                });
                
                questionReview.appendChild(optionsContainer);
                answersReviewElement.appendChild(questionReview);
            });
        }

        // إعادة الاختبار
        restartBtn.addEventListener('click', () => {
            // إعادة تعيين جميع المتغيرات
            currentQuestionIndex = 0;
            userAnswers = new Array(questions.length).fill(null);
            timeLeft = 30 * 60;
            testCompleted = false;
            
            // إعادة تعيين الشاشات
            resultScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
            
            // إعادة تعيين المؤقت والعناصر المرئية
            timerElement.style.color = 'var(--danger)';
            progressElement.style.width = '0%';
        });
    </script>
</body>
</html>
